# Templates Melhorados para Copilot Studio - Abertura de Chamados
# Baseado na an√°lise de 100 tickets reais do GLPI

# =============================================================================
# TEMPLATE 1: VALIDA√á√ÉO DE DESCRI√á√ÉO M√çNIMA
# =============================================================================
validation_description:
  trigger:
    condition: "len(Topic.description) < 50"
  action:
    type: "request_clarification"
    message: |
      Sua descri√ß√£o est√° muito breve. Para que possamos ajudar melhor, 
      por favor forne√ßa mais detalhes:
      
      ‚Ä¢ Quando o problema acontece?
      ‚Ä¢ Que mensagem de erro aparece (se houver)?
      ‚Ä¢ O que voc√™ estava fazendo quando aconteceu?
      ‚Ä¢ Qual o comportamento esperado?
    required: true

# =============================================================================
# TEMPLATE 2: DETEC√á√ÉO DE PALAVRAS VAGAS
# =============================================================================
vague_words_handler:
  trigger_words:
    - "problema"
    - "erro" 
    - "n√£o funciona"
    - "quebrou"
    - "parou"
    - "travou"
    - "bugou"
    - "deu pau"
    - "n√£o vai"
    - "n√£o abre"
    - "lento"
    - "ruim"
  
  responses:
    "problema": |
      Voc√™ mencionou "problema". Pode ser mais espec√≠fico?
      ‚Ä¢ Que tipo de problema exatamente?
      ‚Ä¢ H√° alguma mensagem de erro?
      ‚Ä¢ O que voc√™ esperava que acontecesse?
    
    "erro": |
      Voc√™ mencionou "erro". Pode fornecer mais detalhes?
      ‚Ä¢ Qual a mensagem de erro exata?
      ‚Ä¢ Quando o erro aparece?
      ‚Ä¢ H√° algum c√≥digo de erro?
    
    "n√£o funciona": |
      Voc√™ disse que "n√£o funciona". Pode esclarecer?
      ‚Ä¢ O que especificamente n√£o est√° funcionando?
      ‚Ä¢ Funcionava antes?
      ‚Ä¢ O que acontece quando voc√™ tenta usar?

# =============================================================================
# TEMPLATE 3: FLUXOS ESPEC√çFICOS POR CATEGORIA
# =============================================================================

# HARDWARE (Categoria mais comum - 17% dos tickets)
hardware_flow:
  category_id: 7
  additional_questions:
    equipment_type:
      question: "Qual equipamento est√° com problema?"
      type: "choice"
      options:
        - "Computador/Notebook"
        - "Impressora"
        - "Monitor"
        - "Teclado/Mouse"
        - "Scanner"
        - "Projetor"
        - "Telefone"
        - "Outro"
      required: true
    
    equipment_details:
      question: "Qual a marca e modelo do equipamento? (Se souber)"
      type: "text"
      placeholder: "Ex: HP LaserJet 1020, Dell OptiPlex 7090"
    
    problem_frequency:
      question: "Com que frequ√™ncia o problema acontece?"
      type: "choice"
      options:
        - "Sempre (toda vez que uso)"
        - "√Äs vezes (esporadicamente)"
        - "Primeira vez que acontece"
        - "Come√ßou hoje"
      required: true
    
    error_message:
      question: "H√° alguma mensagem de erro ou luz piscando? Se sim, descreva:"
      type: "text"
      placeholder: "Ex: Luz vermelha piscando, mensagem 'Papel atolado'"
    
    equipment_location:
      question: "Onde est√° localizado o equipamento?"
      type: "text"
      placeholder: "Ex: Sala 201, Mesa da recep√ß√£o, Departamento Financeiro"
      required: true

  title_template: "Hardware - {equipment_type} - {problem_summary}"

# SOFTWARE (Segunda categoria mais comum - 12% dos tickets)
software_flow:
  category_id: 20
  additional_questions:
    software_name:
      question: "Qual programa/sistema est√° com problema?"
      type: "text"
      placeholder: "Ex: Microsoft Word, Sistema FPE, Google Chrome"
      required: true
    
    software_version:
      question: "Sabe qual a vers√£o do programa? (Opcional)"
      type: "text"
      placeholder: "Ex: Office 365, vers√£o 2023"
    
    error_moment:
      question: "Quando o problema acontece?"
      type: "choice"
      options:
        - "Ao tentar abrir o programa"
        - "Durante o uso normal"
        - "Ao salvar arquivos"
        - "Ao fechar o programa"
        - "O programa n√£o abre"
        - "Outro momento"
      required: true
    
    error_details:
      question: "Descreva o que acontece ou qual mensagem aparece:"
      type: "text"
      placeholder: "Ex: Tela fica branca, aparece mensagem 'Erro 404', programa fecha sozinho"
      required: true
    
    affects_others:
      question: "Outros usu√°rios t√™m o mesmo problema?"
      type: "choice"
      options:
        - "Sim, outros tamb√©m t√™m"
        - "N√£o, s√≥ comigo"
        - "N√£o sei/N√£o testei"
    
    recent_changes:
      question: "Houve alguma mudan√ßa recente? (Atualiza√ß√µes, instala√ß√µes, etc.)"
      type: "text"
      placeholder: "Ex: Instalei um programa novo ontem, atualizou automaticamente"

  title_template: "Software - {software_name} - {error_summary}"

# CONECTIVIDADE/REDE (Terceira categoria mais comum - 9% dos tickets)
network_flow:
  category_id: 8
  additional_questions:
    network_type:
      question: "Qual tipo de problema de rede?"
      type: "choice"
      options:
        - "Sem internet"
        - "Internet lenta"
        - "N√£o acessa sistemas internos"
        - "Problema com VPN"
        - "N√£o conecta na rede Wi-Fi"
        - "Problema com e-mail"
        - "Outro"
      required: true
    
    user_location:
      question: "Onde voc√™ est√° localizado?"
      type: "text"
      placeholder: "Ex: Sala 301, Departamento RH, Pr√©dio Anexo"
      required: true
    
    other_users_affected:
      question: "Outros usu√°rios no mesmo local t√™m o problema?"
      type: "choice"
      options:
        - "Sim, todos t√™m problema"
        - "Sim, alguns t√™m problema"
        - "N√£o, s√≥ eu tenho problema"
        - "N√£o sei/N√£o perguntei"
      required: true
    
    network_error:
      question: "H√° alguma mensagem de erro espec√≠fica?"
      type: "text"
      placeholder: "Ex: 'Sem conex√£o com a internet', 'Servidor n√£o encontrado'"
    
    when_started:
      question: "Quando o problema come√ßou?"
      type: "choice"
      options:
        - "Agora mesmo"
        - "Hoje de manh√£"
        - "Ontem"
        - "Esta semana"
        - "N√£o lembro"

  title_template: "Rede - {user_location} - {network_type}"

# =============================================================================
# TEMPLATE 4: VALIDA√á√ÉO DE T√çTULOS GEN√âRICOS
# =============================================================================
generic_title_handler:
  generic_words:
    - "problema"
    - "erro"
    - "ajuda"
    - "suporte"
    - "d√∫vida"
    - "quest√£o"
    - "solicita√ß√£o"
    - "pedido"
    - "urgente"
    - "importante"
  
  action:
    type: "suggest_better_title"
    message: |
      O t√≠tulo "{current_title}" √© muito gen√©rico. 
      Baseado nas suas respostas, sugerimos:
      "{suggested_title}"
      
      Deseja usar este t√≠tulo ou prefere escrever outro?
    
    options:
      - "Usar t√≠tulo sugerido"
      - "Escrever meu pr√≥prio t√≠tulo"

# =============================================================================
# TEMPLATE 5: CAMPOS OBRIGAT√ìRIOS DIN√ÇMICOS
# =============================================================================
dynamic_required_fields:
  hardware:
    required_fields:
      - "equipment_type"
      - "equipment_location"
      - "problem_frequency"
      - "Topic.location"
      - "Topic.contact_phone"
  
  software:
    required_fields:
      - "software_name"
      - "error_moment"
      - "error_details"
      - "Topic.location"
      - "Topic.contact_phone"
  
  network:
    required_fields:
      - "network_type"
      - "user_location"
      - "other_users_affected"
      - "Topic.contact_phone"
  
  access_request:
    required_fields:
      - "system_name"
      - "access_type"
      - "business_justification"
      - "Topic.location"
      - "Topic.contact_phone"

# =============================================================================
# TEMPLATE 6: MENSAGENS DE ORIENTA√á√ÉO
# =============================================================================
guidance_messages:
  welcome: |
    Ol√°! Vou ajudar voc√™ a abrir um chamado no GLPI.
    Para que possamos resolver seu problema rapidamente, 
    vou fazer algumas perguntas espec√≠ficas.
  
  category_selection: |
    Primeiro, vamos identificar o tipo do seu problema.
    Isso me ajudar√° a fazer as perguntas certas.
  
  description_help: |
    Agora descreva seu problema com detalhes.
    Quanto mais informa√ß√µes voc√™ fornecer, mais r√°pido conseguiremos ajudar!
    
    Dicas:
    ‚Ä¢ O que voc√™ estava fazendo quando aconteceu?
    ‚Ä¢ Que mensagem aparece (se houver)?
    ‚Ä¢ Funcionava antes?
  
  completion: |
    Perfeito! Seu chamado foi criado com sucesso.
    
    üìã **N√∫mero do chamado:** {ticket_number}
    üè∑Ô∏è **Categoria:** {category}
    üìç **Local:** {location}
    üìû **Contato:** {phone}
    
    Nossa equipe t√©cnica entrar√° em contato em breve.
    Voc√™ pode acompanhar o andamento pelo GLPI.

# =============================================================================
# TEMPLATE 7: VALIDA√á√ïES FINAIS
# =============================================================================
final_validations:
  before_submit:
    - check: "description_length >= 50"
      error: "Descri√ß√£o deve ter pelo menos 50 caracteres"
    
    - check: "no_vague_words_remaining"
      error: "Ainda h√° termos muito vagos na descri√ß√£o"
    
    - check: "all_required_fields_filled"
      error: "Todos os campos obrigat√≥rios devem ser preenchidos"
    
    - check: "title_not_generic"
      error: "T√≠tulo deve ser mais espec√≠fico"
  
  success_criteria:
    - "Descri√ß√£o detalhada (>= 50 caracteres)"
    - "Categoria espec√≠fica selecionada"
    - "Informa√ß√µes t√©cnicas fornecidas"
    - "Local e contato informados"
    - "T√≠tulo descritivo"